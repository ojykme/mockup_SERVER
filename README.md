# Mock HTTPS Static Server (Windows 가이드)

이 프로젝트는 정적 파일(CSS, JS, 이미지)을 HTTPS 환경에서 가상 도메인으로 서비스하기 위한 간단한 Mock 서버입니다.

## � 전체 설치 및 실행 순서

### 1단계: Node.js 및 환경 준비
1.  **Node.js 설치**: [Node.js 공식 홈페이지](https://nodejs.org/)에서 **LTS** 버전을 다운로드하여 설치합니다.
2.  **설치 확인**: 터미널(PowerShell 또는 CMD)을 열고 다음 명령어를 실행하여 버전을 확인합니다.
    ```powershell
    node -v
    npm -v
    ```

### 2단계: 프로젝트 설정 및 패키지 설치
1.  프로젝트 폴더(`d:\Project2\mockup_SERVER`)로 이동합니다.
2.  **의존성 패키지 설치**: 터미널에서 아래 명령어를 실행합니다. (Express와 자가 서명 인증서 생성 도구가 설치됩니다.)
    ```powershell
    npm install express selfsigned
    ```

### 3단계: 가상 도메인 설정 (Windows Hosts 파일)
로컬 PC가 `shop.pemites.com`을 알아볼 수 있도록 설정이 필요합니다.

1.  **메모장**을 **관리자 권한**으로 실행합니다.
2.  `C:\Windows\System32\drivers\etc\hosts` 파일을 엽니다.
    - *파일 열기 창에서 오른쪽 하단 '텍스트 문서'를 '모든 파일'로 변경해야 보입니다.*
3.  파일 맨 아래에 다음 내용을 추가하고 저장합니다:
    ```text
    127.0.0.1  shop.pemites.com
    ```

### 4단계: 서버 실행 및 도메인 지정
터미널을 **관리자 권한**으로 실행한 후 아래 명령어를 사용합니다.

- **기본 실행**: `shop.pemites.com`으로 실행됩니다.
  ```powershell
  node server.js
  ```
- **특정 도메인으로 실행**: 실행 시 인자로 도메인을 넘겨줄 수 있습니다.
  ```powershell
  node server.js test.mysite.com
  ```
  *(인자로 넘긴 도메인은 `last_domain.txt`에 저장되어, 나중에는 인자 없이도 해당 도메인으로 실행됩니다.)*

### 5단계: 브라우저 접속 및 보안 경고 처리
1.  브라우저 주소창에 `https://shop.pemites.com` (또는 설정한 도메인)을 입력합니다.
2.  **보안 경고 화면**: 자가 서명 인증서이므로 "연결이 안전하지 않음" 경고가 뜹니다.
3.  **[고급]** 또는 **[상세 정보]** 버튼을 클릭합니다.
4.  **[shop.pemites.com(으)로 계속하기(안전하지 않음)]** 링크를 클릭하여 접속합니다.

---

## 📂 프로젝트 구조 안내

- `server.js`: 메인 서버 로직 (비동기 인증서 생성 및 동적 도메인 처리)
- `html/`: 웹 루트 디렉토리 (여기에 CSS, JS, 이미지를 넣으세요)
- `last_domain.txt`: 마지막으로 사용한 도메인 자동 저장 파일
- `cert_[도메인].pem`, `key_[도메인].pem`: 도메인별 자동 생성 인증서

## 💡 참고 사항
- **포트 443**: HTTPS 표준 포트인 443을 사용하므로, 다른 웹 서버(IIS, Apache 등)가 443을 사용 중이면 충돌이 날 수 있습니다.
- **관리자 권한**: 윈도우에서 1024번 이하 포트를 열기 위해서는 반드시 터미널을 관리자 권한으로 실행해야 합니다.
